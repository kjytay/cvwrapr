<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>K-fold cross-validation wrapper — kfoldcv • cvwrapr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="K-fold cross-validation wrapper — kfoldcv" />
<meta property="og:description" content="Does k-fold cross-validation for a given model training function and
prediction function. The hyperparameter to be cross-validated is assumed
to be `lambda`. The training and prediction functions are assumed to be
able to fit/predict for multiple `lambda` values at the same time." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cvwrapr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/computeError.html">Using `computeError`</a>
    </li>
    <li>
      <a href="../articles/kfoldcv.html">Introduction to `kfoldcv`</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>K-fold cross-validation wrapper</h1>
    
    <div class="hidden name"><code>kfoldcv.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Does k-fold cross-validation for a given model training function and
prediction function. The hyperparameter to be cross-validated is assumed
to be `lambda`. The training and prediction functions are assumed to be
able to fit/predict for multiple `lambda` values at the same time.</p>
    </div>

    <pre class="usage"><span class='fu'>kfoldcv</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>y</span>,
  <span class='va'>train_fun</span>,
  <span class='va'>predict_fun</span>,
  type.measure <span class='op'>=</span> <span class='st'>"deviance"</span>,
  family <span class='op'>=</span> <span class='st'>"gaussian"</span>,
  lambda <span class='op'>=</span> <span class='cn'>NULL</span>,
  train_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  predict_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  train_row_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>)</span>,
  predict_row_params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>)</span>,
  nfolds <span class='op'>=</span> <span class='fl'>10</span>,
  foldid <span class='op'>=</span> <span class='cn'>NULL</span>,
  parallel <span class='op'>=</span> <span class='cn'>FALSE</span>,
  grouped <span class='op'>=</span> <span class='cn'>TRUE</span>,
  keep <span class='op'>=</span> <span class='cn'>FALSE</span>,
  save_cvfits <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Input matrix of dimension `nobs` by `nvars`; each row is an
observation vector.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>Response variable. Either a vector or a matrix, depending on the
type of model.</p></td>
    </tr>
    <tr>
      <th>train_fun</th>
      <td><p>The model training function. This needs to take in an
input matrix as `x` and a response variable as `y`.</p></td>
    </tr>
    <tr>
      <th>predict_fun</th>
      <td><p>The prediction function. This needs to take in the
output of `train_fun` as `object` and new input matrix as `newx`.</p></td>
    </tr>
    <tr>
      <th>type.measure</th>
      <td><p>Loss function to use for cross-validation. See
`availableTypeMeasures()` for possible values for `type.measure`. Note that
the package does not check if the user-specified measure is appropriate
for the family.</p></td>
    </tr>
    <tr>
      <th>family</th>
      <td><p>Model family; used to determine the correct loss function.
One of "gaussian", "binomial", "poisson", "cox", "multinomial",
"mgaussian", or a class "family" object.</p></td>
    </tr>
    <tr>
      <th>lambda</th>
      <td><p>Option user-supplied sequence representing the values of the
hyperparameter to be cross-validated.</p></td>
    </tr>
    <tr>
      <th>train_params</th>
      <td><p>Any parameters that should be passed to
`train_fun` to fit the model (other than `x` and `y`). Default is the
empty list.</p></td>
    </tr>
    <tr>
      <th>predict_params</th>
      <td><p>Any other parameters that should be passed tp
`predict_fun` to get predictions (other than `object` and `newx`). Default
is the empty list.</p></td>
    </tr>
    <tr>
      <th>train_row_params</th>
      <td><p>A vector which is a subset of `names(train_params)`,
indicating which parameters have to be subsetted in the CV loop (other
than `x` and `y`. Default is `c()`.
Other parameters which should probably be included here
are "weights" (for observation weights) and "offset".</p></td>
    </tr>
    <tr>
      <th>predict_row_params</th>
      <td><p>A vector which is a subset of
`names(predict_params)`, indicating which parameters have to be subsetted
in the CV loop (other than `newx`). Default is `c()`.
Other parameters which should probably be included here
are "newoffset".</p></td>
    </tr>
    <tr>
      <th>nfolds</th>
      <td><p>Number of folds (default is 10). Smallest allowable value
is 3.</p></td>
    </tr>
    <tr>
      <th>foldid</th>
      <td><p>An optional vector of values between `1` and `nfolds`
(inclusive) identifying which fold each observation is in. If supplied,
`nfolds` can be missing.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>If `TRUE`, use parallel `foreach` to fit each
fold.  Must register parallel backend before hand. Default is `FALSE`.</p></td>
    </tr>
    <tr>
      <th>grouped</th>
      <td><p>This is an experimental argument, with default `TRUE`,
and can be ignored by most users. For all models except `family = "cox"`,
this refers to computing `nfolds` separate statistics, and then using
their mean and estimated standard error to describe the CV curve. If
`FALSE`, an error matrix is built up at the observation level
from the predictions from the `nfolds` fits, and then summarized (does
not apply to `type.measure="auc"`). For the "cox" family,
`grouped=TRUE` obtains the CV partial likelihood for the Kth fold by
<em>subtraction</em>; by subtracting the log partial likelihood evaluated on
the full dataset from that evaluated on the on the (K-1)/K dataset. This
makes more efficient use of risk sets. With `grouped=FALSE` the log
partial likelihood is computed only on the Kth fold.</p></td>
    </tr>
    <tr>
      <th>keep</th>
      <td><p>If `keep = TRUE`, a prevalidated array is returned containing
fitted values for each observation and each value of lambda. This means
these fits are computed with this observation and the rest of its fold
omitted. The `foldid` vector is also returned. Default is `keep = FALSE`.</p></td>
    </tr>
    <tr>
      <th>save_cvfits</th>
      <td><p>If `TRUE`, the model fits for each CV fold are returned
as a list. Default is `FALSE`.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class "cvobj".</p>
<dt>lambda</dt><dd><p>The values of lambda used in the fits.</p></dd>
<dt>cvm</dt><dd><p>The mean cross-validated error: a vector of length
`length(lambda)`.</p></dd>
<dt>cvsd</dt><dd><p>Estimate of standard error of `cvm`.</p></dd>
<dt>cvup</dt><dd><p>Upper curve = `cvm + cvsd`.</p></dd>
<dt>cvlo</dt><dd><p>Lower curve = `cvm - cvsd`.</p></dd>
<dt>lambda.min</dt><dd><p>Value of `lambda` that gives minimum `cvm`.</p></dd>
<dt>lambda.1se</dt><dd><p>Largest value of `lambda` such that the error is within
1 standard error of the minimum.</p></dd>
<dt>index</dt><dd><p>A one-column matrix with the indices of `lambda.min` and
`lambda.1se` in the sequence of coefficients, fits etc.</p></dd>
<dt>name</dt><dd><p>A text string indicating the loss function used (for plotting
purposes).</p></dd>
<dt>fit.preval</dt><dd><p>If `keep=TRUE`, this is the array of prevalidated fits.
Some entries can be `NA`, if that and subsequent values of `lambda` are not
reached for that fold.</p></dd>
<dt>foldid</dt><dd><p>If `keep=TRUE`, the fold assignments used.</p></dd>
<dt>overallfit</dt><dd><p>Model fit for the entire dataset.</p></dd>
<dt>cvfitlist</dt><dd><p>If `save_cvfits=TRUE`, a list containing the model
fits for each CV fold.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The model training function is assumed to take in the data matrix as `x`,
the response as `y`, and the hyperparameter to be cross-validated as
`lambda`. It is assumed that in its returned output, the hyperparameter
values actually used are stored as `lambda`. The prediction function
is assumed to take in the new data matrix as `newx`, and a `lambda`
sequence as `s`.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>)</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>500</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span>
<span class='va'>y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>50</span><span class='op'>)</span>
<span class='va'>cv_fit</span> <span class='op'>&lt;-</span> <span class='fu'>kfoldcv</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span>, train_fun <span class='op'>=</span> <span class='fu'>glmnet</span><span class='fu'>::</span><span class='va'><a href='https://glmnet.stanford.edu/reference/glmnet.html'>glmnet</a></span>,
                  predict_fun <span class='op'>=</span> <span class='va'>predict</span><span class='op'>)</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kenneth Tay.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


